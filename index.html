<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Braxen Development</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <nav>
      <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="quarterclub.html">Quarter Club</a></li>
        <li><a href="terms.html">Terms</a></li>
      </ul>
    </nav>
  </header>

  <main>
    <section>
      <h1>Welcome to Braxen Development</h1>
      <p>Braxen Development, Inc. was founded by The Grace of God with a mission to launch and grow ventures that make a lasting impact.
      Built on vision and adaptability, the company thrives in diverse industries, with a strong focus on helping businesses establish and build credit.</p>
      <p>At its core, Braxen Development is about opening doorsâ€”whether that means creating new opportunities, strengthening financial foundations, 
      or building ventures that stand the test of time. With a forward-looking approach and a commitment to results, Braxen continues to expand its reach 
      and shape ventures that matter.</p>
    </section>
    <!-- EIN FORM + validation -->
    <section>
      <h2>Business EIN Submission</h2>
      <form id="einForm">
        <input type="text" id="ein" maxlength="10" placeholder="XX-XXXXXXX" autocomplete="off" required>
        <span id="einError" style="color:red; display:none;">Please enter a valid EIN (XX-XXXXXXX)</span>
        <span id="serverError" style="color:red; display:none;"></span>
        <button type="submit">Submit</button>
      </form>
    </section>
  </main>
  <footer>
    <p>Contact: <a href="mailto:support@braxendevelopment.work">support@braxendevelopment.work</a></p>
  </footer>

  <script>
    const einInput = document.getElementById('ein');
    const einError = document.getElementById('einError');
    const serverError = document.getElementById('serverError');
    const form = document.getElementById('einForm');
    const WORKER_ENDPOINT = "https://blackthorndevelopment.workers.dev/";

    einInput.addEventListener('input', function() {
      let val = this.value.replace(/D/g, '').slice(0,9);
      if (val.length > 2) {
        this.value = val.slice(0,2) + '-' + val.slice(2);
      } else {
        this.value = val;
      }
    });

    form.addEventListener('submit', async function(e) {
      e.preventDefault();
      einError.style.display = "none";
      serverError.style.display = "none";
      if (!/^d{2}-d{7}$/.test(einInput.value)) {
        einError.style.display = "inline";
        einInput.focus();
        return false;
      }
      try {
        const response = await fetch(WORKER_ENDPOINT, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ ein: einInput.value })
        });
        const result = await response.json();
        if (!response.ok) {
          serverError.innerText = result.error || "Submission failed.";
          serverError.style.display = "inline";
        } else {
          alert("Submitted! Transaction ID: " + result.txnId);
          form.reset();
        }
      } catch (err) {
        serverError.innerText = "Network error. Try again later.";
        serverError.style.display = "inline";
      }
    });
  </script>
</body>
</html>
