<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Quarter Club - Braxen Development</title>
<link rel="stylesheet" href="style.css">
<style>
  body { background-color: #000; color: #fff; font-family: Arial, sans-serif; }
  nav ul { list-style: none; padding: 0; display: flex; gap: 20px; }
  nav a { color: #fff; text-decoration: none; }
  section { margin: 20px; }
  label, select, input { display: block; margin: 10px 0; }
  #cash-code { display: none; }
</style>
</head>
<body>

<header>
  <nav>
    <ul>
      <li><a href="index.html">Home</a></li>
      <li><a href="quarterclub.html">Quarter Club</a></li>
      <li><a href="terms.html">Terms</a></li>
    </ul>
  </nav>
</header>

<main>
  <section>
    <h1>Welcome to the Quarter Club</h1>
    <p>Braxen Development was founded by The Grace of God. The Quarter Club subscription is specifically designed to rebuild credit reputation for businesses. For $10, you can also gain access to the <strong>Path to Profit Handbook</strong>.</p>
  </section>

  <section>
    <form id="quarterclub-form">
      <label for="business-name">Business Name:</label>
      <input type="text" id="business-name" name="business-name" placeholder="Business Name" required>

      <label for="business-ein">EIN:</label>
      <input type="text" id="business-ein" name="business-ein" placeholder="XX-XXXXXXX" required>

      <label for="business-email">Email:</label>
      <input type="email" id="business-email" name="business-email" required>

      <label for="business-phone">Phone Number:</label>
      <input type="text" id="business-phone" name="business-phone" required>

      <label for="business-address">Address:</label>
      <input type="text" id="business-address" name="business-address" placeholder="Street Address" required>

      <label for="business-city">City:</label>
      <input type="text" id="business-city" name="business-city" placeholder="City" required>

      <label for="business-state">State:</label>
      <select id="business-state" name="business-state" required>
        <option value="">Select State</option>
        <option value="AL">Alabama</option>
        <option value="AK">Alaska</option>
        <option value="AZ">Arizona</option>
        <option value="AR">Arkansas</option>
        <option value="CA">California</option>
        <option value="CO">Colorado</option>
        <option value="CT">Connecticut</option>
        <option value="DE">Delaware</option>
        <option value="FL">Florida</option>
        <option value="GA">Georgia</option>
        <option value="HI">Hawaii</option>
        <option value="ID">Idaho</option>
        <option value="IL">Illinois</option>
        <option value="IN">Indiana</option>
        <option value="IA">Iowa</option>
        <option value="KS">Kansas</option>
        <option value="KY">Kentucky</option>
        <option value="LA">Louisiana</option>
        <option value="ME">Maine</option>
        <option value="MD">Maryland</option>
        <option value="MA">Massachusetts</option>
        <option value="MI">Michigan</option>
        <option value="MN">Minnesota</option>
        <option value="MS">Mississippi</option>
        <option value="MO">Missouri</option>
        <option value="MT">Montana</option>
        <option value="NE">Nebraska</option>
        <option value="NV">Nevada</option>
        <option value="NH">New Hampshire</option>
        <option value="NJ">New Jersey</option>
        <option value="NM">New Mexico</option>
        <option value="NY">New York</option>
        <option value="NC">North Carolina</option>
        <option value="ND">North Dakota</option>
        <option value="OH">Ohio</option>
        <option value="OK">Oklahoma</option>
        <option value="OR">Oregon</option>
        <option value="PA">Pennsylvania</option>
        <option value="RI">Rhode Island</option>
        <option value="SC">South Carolina</option>
        <option value="SD">South Dakota</option>
        <option value="TN">Tennessee</option>
        <option value="TX">Texas</option>
        <option value="UT">Utah</option>
        <option value="VT">Vermont</option>
        <option value="VA">Virginia</option>
        <option value="WA">Washington</option>
        <option value="WV">West Virginia</option>
        <option value="WI">Wisconsin</option>
        <option value="WY">Wyoming</option>
      </select>

      <label for="business-zip">ZIP Code:</label>
      <input type="text" id="business-zip" name="business-zip" required>

      <label for="tier-select">Select Tier:</label>
      <select id="tier-select" required>
        <option value="">Select a Tier</option>
        <option value="0.25">Founders’ Circle ($0.25/mo, billed $3/yr)</option>
        <option value="1">Dollar Bill ($1/mo, billed $12/yr)</option>
        <option value="2">Bread & Butter ($2/mo, billed $24/yr)</option>
        <option value="5">Startup Lane ($5/mo)</option>
        <option value="10">Builder’s Foundation ($10/mo)</option>
        <option value="20">Growth Track ($20/mo)</option>
        <option value="50">Pro Business ($50/mo)</option>
        <option value="100">Executive Class ($100/mo)</option>
      </select>

      <label for="payment-type">Payment Method:</label>
      <select id="payment-type" required>
        <option value="">Select Payment Method</option>  
        <option value="paypal">PayPal</option>  
        <option value="polygon">Polygon (USDC)</option>  
        <option value="cash">Cash</option>  
      </select>

      <label id="cash-code-label" for="cash-code" style="display:none;">Enter Cash Code:</label>
      <input type="text" id="cash-code" name="cash-code" style="display:none;" />

      <div id="paypal-button-container" style="margin-top: 20px;"></div>

      <button type="submit">Submit & Pay</button>
    </form>
  </section>
</main>

<script src="https://www.paypal.com/sdk/js?client-id=AdefJjr7m6mZkDwKqt_nyTiOSRCXIThl2h41bgHzev27XWXZFLyGhXF7i8RIfM1ZDucgNVzkdb-w5bnd&currency=USD"></script>
<script>
const POLYGON_WALLET_ADDRESS = "0x3b8eB1C782F7f33525d34028B7E8fA50a214303f";
const MASTER_CASH_CODE = "YOUR_MASTER_CASH_CODE"; // Store in secrets
const tierSelect = document.getElementById('tier-select');
const paymentType = document.getElementById('payment-type');
const paypalContainer = document.getElementById('paypal-button-container');
const form = document.getElementById('quarterclub-form');

// Create hidden inputs if not already in HTML
const cashCodeInput = document.getElementById('cash-code') || (() => {
  const input = document.createElement('input');
  input.type = 'text';
  input.id = 'cash-code';
  input.placeholder = 'Enter Cash Code';
  input.style.display = 'none';
  form.insertBefore(input, form.querySelector('button[type="submit"]'));
  return input;
})();

const cashCodeLabel = document.getElementById('cash-code-label') || (() => {
  const label = document.createElement('label');
  label.id = 'cash-code-label';
  label.innerText = 'Enter Cash Code:';
  label.style.display = 'none';
  form.insertBefore(label, cashCodeInput);
  return label;
})();

const polygonHashInput = document.getElementById('polygon-hash') || (() => {
  const input = document.createElement('input');
  input.type = 'text';
  input.id = 'polygon-hash';
  input.placeholder = 'Enter Polygon Transaction Hash';
  input.style.display = 'none';
  form.insertBefore(input, form.querySelector('button[type="submit"]'));
  return input;
})();

function renderPayPalButton(amount) {
  paypalContainer.innerHTML = "";
  if (!amount) return;
  paypal.Buttons({
    createOrder: (data, actions) => actions.order.create({ purchase_units: [{ amount: { value: amount } }] }),
    onApprove: (data, actions) => actions.order.capture().then(() => {
      paypalContainer.dataset.completed = 'true';
      alert('PayPal payment completed.');
    })
  }).render('#paypal-button-container');
}

// Show/hide inputs based on payment type
paymentType.addEventListener('change', () => {
  const type = paymentType.value;
  paypalContainer.innerHTML = "";
  cashCodeInput.style.display = 'none';
  cashCodeLabel.style.display = 'none';
  polygonHashInput.style.display = 'none';
  paypalContainer.dataset.completed = 'false';

  if (type === 'paypal' && tierSelect.value) renderPayPalButton(tierSelect.value);
  if (type === 'polygon') polygonHashInput.style.display = 'block';
  if (type === 'cash') {
    cashCodeInput.style.display = 'block';
    cashCodeLabel.style.display = 'block';
    cashCodeInput.focus();
  }
});
<script>
const POLYGON_WALLET_ADDRESS = "0x3b8eB1C782F7f33525d34028B7E8fA50a214303f";
const MASTER_CASH_CODE = "YOUR_MASTER_CASH_CODE"; // keep secret
const tierSelect = document.getElementById('tier-select');
const paymentType = document.getElementById('payment-type');
const paypalContainer = document.getElementById('paypal-button-container');
const form = document.getElementById('quarterclub-form');
const submitButton = document.getElementById('submit-button');

// Create hidden cash code input
const cashCodeInput = document.createElement('input');
cashCodeInput.type = 'text';
cashCodeInput.id = 'cash-code';
cashCodeInput.placeholder = 'Enter your transaction code';
cashCodeInput.style.display = 'none';
cashCodeInput.required = true;
form.insertBefore(cashCodeInput, submitButton);

// Disable submit by default
submitButton.disabled = true;

// PayPal button renderer
let paypalApproved = false;
function renderPayPalButton(amount) {
    paypalContainer.innerHTML = "";
    paypalApproved = false;
    if (!amount) return;
    paypal.Buttons({
        createOrder: function(data, actions) {
            return actions.order.create({
                purchase_units: [{ amount: { value: amount } }]
            });
        },
        onApprove: function(data, actions) {
            return actions.order.capture().then(function(details) {
                alert('Transaction completed by ' + details.payer.name.given_name);
                paypalApproved = true;
                checkSubmitEligibility();
            });
        }
    }).render('#paypal-button-container');
}

// Check if form can be submitted
function checkSubmitEligibility() {
    const type = paymentType.value;
    if(type === 'cash' && cashCodeInput.value === MASTER_CASH_CODE) {
        submitButton.disabled = false;
    } else if(type === 'polygon' && document.getElementById('polygon-hash')?.value.trim() !== "") {
        submitButton.disabled = false;
    } else if(type === 'paypal' && paypalApproved) {
        submitButton.disabled = false;
    } else {
        submitButton.disabled = true;
    }
}

// Payment type changes
paymentType.addEventListener('change', () => {
    const type = paymentType.value;
    paypalContainer.innerHTML = "";
    cashCodeInput.style.display = "none";

    if(type === 'paypal' && tierSelect.value) renderPayPalButton(tierSelect.value);
    if(type === 'cash') cashCodeInput.style.display = "block";
    if(type === 'polygon') alert(`Send payment to Polygon Wallet: ${POLYGON_WALLET_ADDRESS} and enter the transaction hash.`);

    checkSubmitEligibility();
});

// Tier change updates PayPal button if PayPal selected
tierSelect.addEventListener('change', () => {
    if(paymentType.value === 'paypal') renderPayPalButton(tierSelect.value);
    checkSubmitEligibility();
});

// Cash code input changes
cashCodeInput.addEventListener('input', checkSubmitEligibility);

// Polygon hash input (create this in HTML as <input id="polygon-hash">)
document.getElementById('polygon-hash')?.addEventListener('input', checkSubmitEligibility);

// Form submission
form.addEventListener('submit', async (e) => {
    e.preventDefault();

    const businessData = {
        name: document.getElementById('business-name').value,
        ein: document.getElementById('business-ein').value,
        email: document.getElementById('business-email').value,
        phone: document.getElementById('business-phone').value,
        address: document.getElementById('business-address').value,
        city: document.getElementById('business-city').value,
        state: document.getElementById('business-state').value,
        zip: document.getElementById('business-zip').value,
        tier: tierSelect.value,
        paymentType: paymentType.value,
        cashCode: cashCodeInput.value.trim(),
        polygonHash: document.getElementById('polygon-hash')?.value.trim() || null
    };

    try {
        const response = await fetch('https://api.braxendevelopment.work/', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(businessData)
        });

        if (!response.ok) throw new Error('Network response was not ok');
        alert("Form submitted successfully. Thank you for joining The Quarter Club!");
    } catch(err) {
        console.error('Error submitting form:', err);
        alert('There was an error submitting your data. Please try again.');
    }
});
</script>
