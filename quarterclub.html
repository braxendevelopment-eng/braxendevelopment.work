<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Quarter Club - Braxen Development</title>
<style>
  body { background-color: #000; color: #fff; font-family: Arial, sans-serif; margin: 0; padding: 0; }
  nav { background-color: #000; padding: 10px 20px; }
  nav ul { list-style: none; margin: 0; padding: 0; display: flex; gap: 30px; }
  nav a { color: #fff; text-decoration: none; font-weight: bold; }
  section { margin: 20px; }
  label, select, input, button { display: block; margin: 10px 0; color: #000; }
  select, input, button { padding: 8px; font-size: 14px; }
  button { background-color: #000; color: #fff; border: none; cursor: pointer; }
  #paypal-button-container, #polygon-section, #cash-section { margin-top: 20px; }
</style>
</head>
<body>

<header>
  <nav>
    <ul>
      <li><a href="index.html">Home</a></li>
      <li><a href="quarterclub.html">Quarter Club</a></li>
      <li><a href="terms.html">Terms</a></li>
    </ul>
  </nav>
</header>

<main>
<section>
  <h1>Welcome to the Quarter Club</h1>
  <p>Select your tier and payment method. Annual payments multiply your selected tier by 12. Monthly payments only available for $5 and above.</p>
</section>

<section>
<form id="quarterclub-form">
  <label for="business-name">Business Name:</label>
  <input type="text" id="business-name" required>

  <label for="business-ein">EIN:</label>
  <input type="text" id="business-ein" placeholder="XX-XXXXXXX" required>

  <label for="business-email">Email:</label>
  <input type="email" id="business-email" required>

  <label for="business-phone">Phone Number:</label>
  <input type="text" id="business-phone" required>

  <label for="business-address">Address:</label>
  <input type="text" id="business-address" required>

  <label for="business-city">City:</label>
  <input type="text" id="business-city" required>

  <label for="business-state">State:</label>
<select id="business-state" required>
  <option value="">Select State</option>
  <option value="AL">Alabama</option>
  <option value="AK">Alaska</option>
  <option value="AZ">Arizona</option>
  <option value="AR">Arkansas</option>
  <option value="CA">California</option>
  <option value="CO">Colorado</option>
  <option value="CT">Connecticut</option>
  <option value="DE">Delaware</option>
  <option value="DC">District of Columbia</option>
  <option value="FL">Florida</option>
  <option value="GA">Georgia</option>
  <option value="HI">Hawaii</option>
  <option value="ID">Idaho</option>
  <option value="IL">Illinois</option>
  <option value="IN">Indiana</option>
  <option value="IA">Iowa</option>
  <option value="KS">Kansas</option>
  <option value="KY">Kentucky</option>
  <option value="LA">Louisiana</option>
  <option value="ME">Maine</option>
  <option value="MD">Maryland</option>
  <option value="MA">Massachusetts</option>
  <option value="MI">Michigan</option>
  <option value="MN">Minnesota</option>
  <option value="MS">Mississippi</option>
  <option value="MO">Missouri</option>
  <option value="MT">Montana</option>
  <option value="NE">Nebraska</option>
  <option value="NV">Nevada</option>
  <option value="NH">New Hampshire</option>
  <option value="NJ">New Jersey</option>
  <option value="NM">New Mexico</option>
  <option value="NY">New York</option>
  <option value="NC">North Carolina</option>
  <option value="ND">North Dakota</option>
  <option value="OH">Ohio</option>
  <option value="OK">Oklahoma</option>
  <option value="OR">Oregon</option>
  <option value="PA">Pennsylvania</option>
  <option value="RI">Rhode Island</option>
  <option value="SC">South Carolina</option>
  <option value="SD">South Dakota</option>
  <option value="TN">Tennessee</option>
  <option value="TX">Texas</option>
  <option value="UT">Utah</option>
  <option value="VT">Vermont</option>
  <option value="VA">Virginia</option>
  <option value="WA">Washington</option>
  <option value="WV">West Virginia</option>
  <option value="WI">Wisconsin</option>
  <option value="WY">Wyoming</option>
</select>

  <label for="business-zip">ZIP Code:</label>
  <input type="text" id="business-zip" required>

  <!-- Tier Selection -->
<label for="tier-select" style="color: white;">Select Tier / Package:</label>
<select id="tier-select" required>
  <option value="">Select a Tier / Package</option>

  <!-- Core Memberships -->
  <option value="0.25">Founders’ Circle ($0.25/mo, billed $3/yr)</option>
  <option value="2">Bread & Butter ($2/mo, billed $24/yr)</option>

  <!-- Growth Tiers -->
  <option value="5">Startup Lane ($5/mo or $60/yr)</option>
  <option value="10">Builder’s Foundation ($10/mo or $120/yr)</option>
  <option value="20">Growth Track ($20/mo or $240/yr)</option>
  <option value="50">Pro Business ($50/mo or $600/yr)</option>
  <option value="100">Executive Class ($100/mo or $1,200/yr)</option>

  <!-- One-Time Offers -->
  <option value="10_pdf">Path to Profit Handbook ($10 one-time)</option>
</select>

<!-- Billing Type -->
<div style="margin-top: 10px;">
  <label for="billing-type" style="color: white;">Billing Option:</label>
  <select id="billing-type">
    <option value="monthly">Monthly</option>
    <option value="annual">Annual</option>
  </select>
</div>

<!-- Displayed Price -->
<p id="price-display" style="color: white; margin-top: 10px; font-weight: bold;">
  Select a tier to view pricing.
</p>

<script>
  const tierSelect = document.getElementById('tier-select');
  const billingType = document.getElementById('billing-type');
  const priceDisplay = document.getElementById('price-display');

  function updatePrice() {
    const selectedValue = tierSelect.value;
    const selectedText = tierSelect.options[tierSelect.selectedIndex].text;
    const billing = billingType.value;

    if (!selectedValue) {
      priceDisplay.textContent = 'Select a tier to view pricing.';
      return;
    }

    if (selectedValue.includes('_pdf')) {
      priceDisplay.textContent = 'Path to Profit Handbook — $10 one-time payment.';
      return;
    }

    const basePrice = parseFloat(selectedValue);
    let displayText = '';

    // Restrict monthly billing for tiers $5 and up only
    if (billing === 'monthly' && basePrice < 5) {
      displayText = `${selectedText} — *Monthly billing not available for this tier.*`;
    } else if (billing === 'annual') {
      const annualPrice = (basePrice * 12).toFixed(2);
      displayText = `${selectedText} — Annual Plan: $${annualPrice}/yr`;
    } else {
      displayText = `${selectedText} — Monthly Plan: $${basePrice}/mo`;
    }

    priceDisplay.textContent = displayText;
  }

  tierSelect.addEventListener('change', updatePrice);
  billingType.addEventListener('change', updatePrice);
</script>
  

  <label for="billing-cycle">Billing Cycle:</label>
  <select id="billing-cycle" required>
    
    <option value="monthly">Monthly</option>
    <option value="annual">Annual</option>
  </select>

  <label for="payment-type">Payment Method:</label>
  <select id="payment-type" required>
    <option value="">Select Payment Method</option>
    <option value="paypal">PayPal</option>
    <option value="polygon">Polygon (USDC)</option>
    <option value="cash">Cash</option>
  </select>

  <div id="paypal-button-container"></div>

  <div id="polygon-section" style="display:none;">
    <p>Send payment to this Polygon Wallet:</p>
    <input type="text" value="0x3b8eB1C782F7f33525d34028B7E8fA50a214303f" readonly id="polygon-wallet">
    <button type="button" id="copy-polygon">Copy Address</button>
    <label for="polygon-hash">Enter Transaction Hash:</label>
    <!-- Inside polygon section -->
<p id="polygon-gas-fee">Estimated Gas Fee: Fetching...</p>
    <input type="text" id="polygon-hash" placeholder="Transaction Hash" required>
  </div>

  <div id="cash-section" style="display:none;">
    <label for="cash-code">Enter Cash Code:</label>
    <input type="text" id="cash-code" placeholder="Master Cash Code" required>
  </div>

  <button type="submit">Submit & Pay</button>
</form>
</section>
</main>

<script src="https://www.paypal.com/sdk/js?client-id=AdefJjr7m6mZkDwKqt_nyTiOSRCXIThl2h41bgHzev27XWXZFLyGhXF7i8RIfM1ZDucgNVzkdb-w5bnd&currency=USD"></script>

<script>
const tierSelect = document.getElementById('tier-select');
const billingCycle = document.getElementById('billing-cycle');
const paymentType = document.getElementById('payment-type');
const paypalContainer = document.getElementById('paypal-button-container');
const polygonSection = document.getElementById('polygon-section');
const cashSection = document.getElementById('cash-section');
const cashCodeInput = document.getElementById('cash-code');
const polygonHashInput = document.getElementById('polygon-hash');
const copyPolygonBtn = document.getElementById('copy-polygon');
const form = document.getElementById('quarterclub-form');
const MASTER_CASH_CODE = "YOUR_SECRET_CODE";

// Copy polygon wallet
copyPolygonBtn.addEventListener('click', () => {
  const wallet = document.getElementById('polygon-wallet');
  wallet.select();
  document.execCommand('copy');
  alert('Polygon address copied!');
});

// Show/hide payment sections
paymentType.addEventListener('change', () => {
  paypalContainer.innerHTML = '';
  polygonSection.style.display = 'none';
  cashSection.style.display = 'none';

  if(paymentType.value === 'paypal') {
    if(tierSelect.value) renderPayPalButton(getFinalAmount());
  } else if(paymentType.value === 'polygon') {
    polygonSection.style.display = 'block';
    alert('Enter your Polygon transaction hash to complete payment.');
  } else if(paymentType.value === 'cash') {
    cashSection.style.display = 'block';
    alert('Enter the master cash code to complete payment.');
  }
});

// Calculate final amount
function getFinalAmount() {
  let amount = parseFloat(tierSelect.value);
  if(billingCycle.value === 'annual') amount *= 12;
  if(billingCycle.value === 'monthly' && amount < 5) {
    alert('Monthly payments are only available for $5 and above.');
    return null;
  }
  return amount;
}

// Render PayPal button
function renderPayPalButton(amount) {
  paypalContainer.innerHTML = "";
  if(!amount) return;

  paypal.Buttons({
    createOrder: (data, actions) => actions.order.create({
      purchase_units: [{ amount: { value: amount } }]
    }),
    onApprove: (data, actions) => actions.order.capture().then(details => {
      alert('Transaction completed by ' + details.payer.name.given_name);
    })
  }).render('#paypal-button-container');
}

// Form submission
form.addEventListener('submit', async (e) => {
  e.preventDefault();
  const finalAmount = getFinalAmount();
  if(finalAmount === null) return;

  const payment = paymentType.value;

  if(payment === 'cash') {
    if(cashCodeInput.value !== MASTER_CASH_CODE) {
      alert('Invalid cash code.');
      return;
    }
  }

  if(payment === 'polygon') {
    if(!polygonHashInput.value.trim()) {
      alert('Enter your Polygon transaction hash before submitting.');
      return;
    }
  }

  if(payment === 'paypal') {
    if(!tierSelect.value) return alert('Select a tier before submitting PayPal payment.');
    renderPayPalButton(finalAmount);
    return;
  }

  const businessData = {
    name: document.getElementById('business-name').value,
    ein: document.getElementById('business-ein').value,
    email: document.getElementById('business-email').value,
    phone: document.getElementById('business-phone').value,
    address: document.getElementById('business-address').value,
    city: document.getElementById('business-city').value,
    state: document.getElementById('business-state').value,
    zip: document.getElementById('business-zip').value,
    tier: tierSelect.value,
    billingCycle: billingCycle.value,
    paymentType: payment,
    cashCode: cashCodeInput.value.trim(),
    polygonHash: polygonHashInput.value.trim()
  };

  // ...previous code above remains the same...

  // Optional: POST to Worker API
  try {
    const response = await fetch('https://api.braxendevelopment.work/', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(businessData)
    });
    if(!response.ok) throw new Error('Network response was not ok');
    alert(`Form submitted successfully for ${payment.toUpperCase()}.\nAmount: $${finalAmount.toFixed(2)}`);
  } catch (err) {
    console.error('Error submitting form:', err);
    alert('There was an error submitting your data. Please try again.');
  }
});
</script>
</body>
</html>
