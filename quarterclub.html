<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Quarter Club | Braxen Development</title>
  <link rel="stylesheet" href="style.css">
</head>
<body class="bg-black text-white">

  <!-- Header & Navigation -->
  <header>
    <nav class="p-4 bg-black">
      <ul class="flex space-x-6 text-white">
        <li><a href="index.html">Home</a></li>
        <li><a href="quarterclub.html" class="font-bold">Quarter Club</a></li>
        <li><a href="terms.html">Terms</a></li>
      </ul>
    </nav>
  </header>

  <main class="px-6 py-12 max-w-4xl mx-auto">

    <!-- About Quarter Club -->
    <section class="mb-12">
      <h1 class="text-3xl font-bold mb-4">Quarter Club</h1>
      <p class="mb-4">
        The Quarter Club is designed to rebuild credit reputation. Subscription tiers start at $0.25/month ($3/year billed annually) for Founders’ Circle, and scale up through multiple levels.
      </p>
      <p>
        Access the <strong>Path to Profit Handbook</strong> for $10 or combine with a consultation package for $25 under NDA. These resources provide actionable solutions tailored to your business.
      </p>
    </section>

    <!-- Subscription Tiers -->
    <section class="mb-12">
      <h2 class="text-2xl font-bold mb-4">Choose Your Subscription Tier</h2>
      <div class="card">
        <label for="tier-select">Select Tier:</label>
        <select id="tier-select">
          <option value="0.25">Founders’ Circle - $0.25/mo ($3/year)</option>
          <option value="1">Dollar Bill - $1/mo ($12/year)</option>
          <option value="2">Bread & Butter - $2/mo ($24/year)</option>
          <option value="5">Startup Lane - $5/mo</option>
          <option value="10">Builder’s Foundation - $10/mo</option>
          <option value="20">Growth Track - $20/mo</option>
          <option value="50">Pro Business - $50/mo</option>
          <option value="100">Executive Class - $100/mo</option>
        </select>
      </div>
    </section>

    <!-- PayPal Payment -->
    <section class="card mb-12">
      <h2 class="mb-2">Pay via PayPal</h2>
      <p class="mb-4">Use PayPal to pay your selected subscription tier.</p>
      <div id="paypal-button-container"></div>
      <script src="https://www.paypal.com/sdk/js?client-id=AdefJjr7m6mZkDwKqt_nyTiOSRCXIThl2h41bgHzev27XWXZFLyGhXF7i8RIfM1ZDucgNVzkdb-w5bnd&currency=USD"></script>
      <script>
        const tierSelect = document.getElementById('tier-select');

        paypal.Buttons({
          style: { layout: 'vertical', color: 'white', shape: 'rect', label: 'pay' },
          createOrder: function(data, actions) {
            return actions.order.create({
              purchase_units: [{ amount: { value: tierSelect.value } }]
            });
          },
          onApprove: function(data, actions) {
            return actions.order.capture().then(function(details) {
              alert('Transaction completed by ' + details.payer.name.given_name);
              fetch('https://api.braxendevelopment.work/', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                  paymentType: 'paypal',
                  tier: tierSelect.value,
                  payerEmail: details.payer.email_address
                })
              });
            });
          }
        }).render('#paypal-button-container');
      </script>
    </section>

    <!-- Polygon Crypto Payment -->
    <section class="card mb-12">
      <h2 class="mb-2">Pay via Polygon (USDC)</h2>
      <p class="mb-4">Copy the wallet address below and send your payment. Submit the transaction hash once completed.</p>
      <code id="polygon-address">0x3b8eB1C782F7f33525d34028B7E8fA50a214303f</code>
      <form id="polygon-form" class="mt-4">
        <label for="txn-hash">Transaction Hash:</label>
        <input type="text" id="txn-hash" placeholder="Enter transaction hash" required>
        <button type="submit">Submit Hash</button>
      </form>
      <span id="hash-error" class="error" style="display:none;">Invalid transaction hash.</span>
    </section>

  </main>

  <footer class="text-center py-6 border-t border-gray-700">
    <p>Contact: <a href="mailto:billing@braxendevelopment.work">billing@braxendevelopment.work</a></p>
  </footer>

  <script>
    const polygonForm = document.getElementById('polygon-form');
    const hashError = document.getElementById('hash-error');
    const WORKER_ENDPOINT = "https://api.braxendevelopment.work/";

    polygonForm.addEventListener('submit', async (e) => {
      e.preventDefault();
      hashError.style.display = "none";

      const hash = document.getElementById('txn-hash').value.trim();
      if (!hash) return;

      try {
        const response = await fetch(WORKER_ENDPOINT, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            paymentType: 'polygon',
            txnHash: hash,
            tier: tierSelect.value
          })
        });
        const result = await response.json();
        if (!response.ok) {
          hashError.innerText = result.error || "Submission failed.";
          hashError.style.display = "inline";
        } else {
          alert("Transaction verified! Transaction ID: " + result.txnId);
          polygonForm.reset();
        }
      } catch (err) {
        hashError.innerText = "Network error. Try again later.";
        hashError.style.display = "inline";
      }
    });
  </script>

</body>
</html>
