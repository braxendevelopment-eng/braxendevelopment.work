<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Quarter Club | Braxen Development</title>
  <link rel="stylesheet" href="style.css">
</head>
<body class="bg-black text-white">

  <!-- Header & Navigation -->
  <header>
    <nav class="p-4 bg-black">
      <ul class="flex space-x-6 text-white">
        <li><a href="index.html">Home</a></li>
        <li><a href="quarterclub.html" class="font-bold">Quarter Club</a></li>
        <li><a href="terms.html">Terms</a></li>
      </ul>
    </nav>
  </header>

  <main class="px-6 py-12 max-w-4xl mx-auto">

    <!-- About Quarter Club -->
    <section class="mb-12">
      <h1 class="text-3xl font-bold mb-4">Quarter Club</h1>
      <p class="mb-4">
        The Quarter Club is designed to rebuild credit reputation. Subscription tiers start at $0.25/month ($3/year billed annually) for Foundersâ€™ Circle, and scale up through multiple levels.
      </p>
      <p>
        Access the <strong>Path to Profit Handbook</strong> for $10 or combine with a consultation package for $25 under NDA. These resources provide actionable solutions tailored to your business.
      </p>
    </section>

    <!-- Subscription Tiers -->
    <!-- Subscription Selection -->
<section class="card mb-6">
  <h2>Select Your Subscription Tier</h2>
  <select id="tier-select">
    <option value="">Select Tier</option>
    <option value="0.25">Founders' Circle - $0.25/mo ($3/yr)</option>
    <option value="1">Dollar Bill - $1/mo</option>
    <option value="2">Bread & Butter - $2/mo</option>
    <option value="5">Startup Lane - $5/mo</option>
    <option value="10">Builder's Foundation - $10/mo</option>
    <option value="20">Growth Track - $20/mo</option>
    <option value="50">Pro Business - $50/mo</option>
    <option value="100">Executive Class - $100/mo</option>
  </select>
</section>

<!-- Business Information Form (Initially Hidden) -->
<section id="business-form-section" class="card mb-12" style="display:none;">
  <h2 class="mb-4">Business Information</h2>
  <form id="business-form">
    <label for="biz-name">Business Name:</label>
    <input type="text" id="biz-name" required>

    <label for="ein">Business EIN (XX-XXXXXXX):</label>
    <input type="text" id="ein" maxlength="10" required>

    <label for="biz-email">Business Email:</label>
    <input type="email" id="biz-email" required>

    <label for="biz-phone">Business Phone:</label>
    <input type="tel" id="biz-phone" required>

    <label for="biz-address">Street Address:</label>
    <input type="text" id="biz-address" required>

    <label for="biz-city">City:</label>
    <input type="text" id="biz-city" required>

    <label for="biz-state">State:</label>
    <select id="biz-state" required>
  <option value="">Select State</option>
  <option value="AL">Alabama</option>
  <option value="AK">Alaska</option>
  <option value="AZ">Arizona</option>
  <option value="AR">Arkansas</option>
  <option value="CA">California</option>
  <option value="CO">Colorado</option>
  <option value="CT">Connecticut</option>
  <option value="DE">Delaware</option>
  <option value="FL">Florida</option>
  <option value="GA">Georgia</option>
  <option value="HI">Hawaii</option>
  <option value="ID">Idaho</option>
  <option value="IL">Illinois</option>
  <option value="IN">Indiana</option>
  <option value="IA">Iowa</option>
  <option value="KS">Kansas</option>
  <option value="KY">Kentucky</option>
  <option value="LA">Louisiana</option>
  <option value="ME">Maine</option>
  <option value="MD">Maryland</option>
  <option value="MA">Massachusetts</option>
  <option value="MI">Michigan</option>
  <option value="MN">Minnesota</option>
  <option value="MS">Mississippi</option>
  <option value="MO">Missouri</option>
  <option value="MT">Montana</option>
  <option value="NE">Nebraska</option>
  <option value="NV">Nevada</option>
  <option value="NH">New Hampshire</option>
  <option value="NJ">New Jersey</option>
  <option value="NM">New Mexico</option>
  <option value="NY">New York</option>
  <option value="NC">North Carolina</option>
  <option value="ND">North Dakota</option>
  <option value="OH">Ohio</option>
  <option value="OK">Oklahoma</option>
  <option value="OR">Oregon</option>
  <option value="PA">Pennsylvania</option>
  <option value="RI">Rhode Island</option>
  <option value="SC">South Carolina</option>
  <option value="SD">South Dakota</option>
  <option value="TN">Tennessee</option>
  <option value="TX">Texas</option>
  <option value="UT">Utah</option>
  <option value="VT">Vermont</option>
  <option value="VA">Virginia</option>
  <option value="WA">Washington</option>
  <option value="WV">West Virginia</option>
  <option value="WI">Wisconsin</option>
  <option value="WY">Wyoming</option>
    </select>
    

    <label for="biz-zip">ZIP Code:</label>
    <input type="text" id="biz-zip" required>

    <button type="submit">Submit Business Info</button>
  </form>
  <span id="form-error" style="color:red; display:none;"></span>
</section>

<script>
  const tierSelect = document.getElementById('tier-select');
  const formSection = document.getElementById('business-form-section');

  // Show form only when a tier is selected
  tierSelect.addEventListener('change', () => {
    formSection.style.display = tierSelect.value ? 'block' : 'none';
  });

  const bizForm = document.getElementById('business-form');
  const formError = document.getElementById('form-error');

  bizForm.addEventListener('submit', async (e) => {
    e.preventDefault();
    formError.style.display = "none";

    const data = {
      tier: tierSelect.value,
      name: document.getElementById('biz-name').value.trim(),
      ein: document.getElementById('ein').value.trim(),
      email: document.getElementById('biz-email').value.trim(),
      phone: document.getElementById('biz-phone').value.trim(),
      address: document.getElementById('biz-address').value.trim(),
      city: document.getElementById('biz-city').value.trim(),
      state: document.getElementById('biz-state').value,
      zip: document.getElementById('biz-zip').value.trim()
    };

    if (!/^\d{2}-\d{7}$/.test(data.ein)) {
      formError.innerText = "Invalid EIN format. Use XX-XXXXXXX";
      formError.style.display = "inline";
      return;
    }

    try {
      const response = await fetch("https://api.braxendevelopment.work/", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ type: "business-info", ...data })
      });
      const result = await response.json();
      if (!response.ok) {
        formError.innerText = result.error || "Submission failed.";
        formError.style.display = "inline";
      } else {
        alert("Business information submitted successfully!");
        bizForm.reset();
        formSection.style.display = 'none';
        tierSelect.value = "";
      }
    } catch (err) {
      formError.innerText = "Network error. Try again later.";
      formError.style.display = "inline";
    }
  });
</script>

    <!-- PayPal Payment -->
    <section class="card mb-12">
      <h2 class="mb-2">Pay via PayPal</h2>
      <p class="mb-4">Use PayPal to pay your selected subscription tier.</p>
      <div id="paypal-button-container"></div>
      <script src="https://www.paypal.com/sdk/js?client-id=AdefJjr7m6mZkDwKqt_nyTiOSRCXIThl2h41bgHzev27XWXZFLyGhXF7i8RIfM1ZDucgNVzkdb-w5bnd&currency=USD"></script>
      <script>
        const tierSelect = document.getElementById('tier-select');

        paypal.Buttons({
          style: { layout: 'vertical', color: 'white', shape: 'rect', label: 'pay' },
          createOrder: function(data, actions) {
            return actions.order.create({
              purchase_units: [{ amount: { value: tierSelect.value } }]
            });
          },
          onApprove: function(data, actions) {
            return actions.order.capture().then(function(details) {
              alert('Transaction completed by ' + details.payer.name.given_name);
              fetch('https://api.braxendevelopment.work/', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                  paymentType: 'paypal',
                  tier: tierSelect.value,
                  payerEmail: details.payer.email_address
                })
              });
            });
          }
        }).render('#paypal-button-container');
      </script>
    </section>

    <!-- Polygon Crypto Payment -->
    <section class="card mb-12">
      <h2 class="mb-2">Pay via Polygon (USDC)</h2>
      <p class="mb-4">Copy the wallet address below and send your payment. Submit the transaction hash once completed.</p>
      <code id="polygon-address">0x3b8eB1C782F7f33525d34028B7E8fA50a214303f</code>
      <form id="polygon-form" class="mt-4">
        <label for="txn-hash">Transaction Hash:</label>
        <input type="text" id="txn-hash" placeholder="Enter transaction hash" required>
        <button type="submit">Submit Hash</button>
      </form>
      <span id="hash-error" class="error" style="display:none;">Invalid transaction hash.</span>
    </section>

  </main>

  <footer class="text-center py-6 border-t border-gray-700">
    <p>Contact: <a href="mailto:billing@braxendevelopment.work">billing@braxendevelopment.work</a></p>
  </footer>

  <script>
    const polygonForm = document.getElementById('polygon-form');
    const hashError = document.getElementById('hash-error');
    const WORKER_ENDPOINT = "https://api.braxendevelopment.work/";

    polygonForm.addEventListener('submit', async (e) => {
      e.preventDefault();
      hashError.style.display = "none";

      const hash = document.getElementById('txn-hash').value.trim();
      if (!hash) return;

      try {
        const response = await fetch(WORKER_ENDPOINT, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            paymentType: 'polygon',
            txnHash: hash,
            tier: tierSelect.value
          })
        });
        const result = await response.json();
        if (!response.ok) {
          hashError.innerText = result.error || "Submission failed.";
          hashError.style.display = "inline";
        } else {
          alert("Transaction verified! Transaction ID: " + result.txnId);
          polygonForm.reset();
        }
      } catch (err) {
        hashError.innerText = "Network error. Try again later.";
        hashError.style.display = "inline";
      }
    });
  </script>

</body>
</html>
