<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Quarter Club - Braxen Development</title>
<style>
  /* ------------------ Page Styles ------------------ */
  body { background-color: #000; color: #fff; font-family: Arial, sans-serif; margin: 0; padding: 0; }
  nav { background-color: #000; padding: 10px 20px; }
  nav ul { list-style: none; margin: 0; padding: 0; display: flex; gap: 30px; }
  nav a { color: #fff; text-decoration: none; font-weight: bold; }
  section { margin: 20px; }

  /* ------------------ Form Labels ------------------ */
  form label {
      color: #fff;           
      display: block;        
      margin: 10px 0 5px;    
      font-weight: bold;     
  }

  /* ------------------ Input Fields ------------------ */
  form input,
  form select,
  form textarea {
      display: block;           
      width: 100%;              
      padding: 10px;            
      font-size: 14px;          
      margin-bottom: 15px;      
      border-radius: 5px;       
      border: 1px solid #555;   
      box-sizing: border-box;   
      color: #fff;              
      background-color: #111;   
  }

  /* ------------------ Focused Inputs ------------------ */
  form input:focus,
  form select:focus,
  form textarea:focus {
      outline: none;             
      border-color: #00ffcc;     
      box-shadow: 0 0 5px #00ffcc; 
  }

  /* ------------------ Buttons ------------------ */
  form button {
      display: block;
      width: 100%;              
      padding: 10px;
      font-size: 14px;
      margin-bottom: 15px;
      border-radius: 5px;
      background-color: #000;   
      color: #00ffcc;           
      border: 1px solid #00ffcc; 
      cursor: pointer;          
      transition: all 0.3s;    
  }

  form button:hover {
      background-color: #00ffcc; 
      color: #000;               
      border: 1px solid #000;    
  }

  /* ------------------ Payment Sections ------------------ */
  #paypal-button-container, #polygon-section, #cash-section {
      margin-top: 20px;          
  }

  #polygon-wallet, #cash-code {
      width: 100%;               
      padding: 10px;
      font-size: 14px;
      border-radius: 5px;
      border: 1px solid #555;
      background-color: #111;    
      color: #fff;               
  }

</style>
</head>
<body>
<header>
  <nav>
    <ul>
      <li><a href="index.html">Home</a></li>
      <li><a href="quarterclub.html">Quarter Club</a></li>
      <li><a href="terms.html">Terms</a></li>
    </ul>
  </nav>
</header>

<main>
<section>
  <h1>Welcome to the Quarter Club</h1>
  <p>Select your tier and payment method. Annual payments multiply your selected tier by 12. Monthly payments only available for $5 and above.</p>
</section>

<section>
<form id="quarterclub-form">
  <label for="business-name">Business Name:</label>
  <input type="text" id="business-name" required>

  <label for="business-ein">EIN:</label>
  <input type="text" id="business-ein" placeholder="XX-XXXXXXX" required>

  <label for="business-email">Email:</label>
  <input type="email" id="business-email" required>

  <label for="business-phone">Phone Number:</label>
  <input type="text" id="business-phone" required>

  <label for="business-address">Address:</label>
  <input type="text" id="business-address" required>

  <label for="business-city">City:</label>
  <input type="text" id="business-city" required>

  <label for="business-state">State:</label>
  <select id="business-state" required>
    <option value="">Select State</option>
    <option value="AL">Alabama</option>
    <option value="AK">Alaska</option>
    <option value="AZ">Arizona</option>
    <option value="WY">Wyoming</option>
  </select>

  <label for="business-zip">ZIP Code:</label>
  <input type="text" id="business-zip" required>

  <label for="tier-select">Select Tier / Package:</label>
  <select id="tier-select" required>
    <option value="">Select a Tier / Package</option>
    <option value="0.25">Founders’ Circle ($0.25/mo, billed $3/yr)</option>
    <option value="2">Bread & Butter ($2/mo, billed $24/yr)</option>
    <option value="5">Startup Lane ($5/mo or $60/yr)</option>
    <option value="10">Builder’s Foundation ($10/mo or $120/yr)</option>
    <option value="20">Growth Track ($20/mo or $240/yr)</option>
    <option value="50">Pro Business ($50/mo or $600/yr)</option>
    <option value="100">Executive Class ($100/mo or $1,200/yr)</option>
    <option value="10_pdf">Path to Profit Handbook ($10 one-time)</option>
  </select>

  <label for="billing-cycle">Billing Cycle:</label>
  <select id="billing-cycle" required>
    <option value="monthly">Monthly</option>
    <option value="annual">Annual</option>
  </select>

  <p id="price-display" style="color: #fff; font-weight: bold;">Select a tier to view pricing.</p>

  <label for="payment-type">Payment Method:</label>
  <select id="payment-type" required>
    <option value="">Select Payment Method</option>
    <option value="paypal">PayPal</option>
    <option value="polygon">Polygon (USDC)</option>
    <option value="cash">Cash</option>
  </select>

  <div id="paypal-button-container"></div>

  <div id="polygon-section" style="display:none;">
    <p>Send payment to this Polygon Wallet:</p>
    <input type="text" value="0x3b8eB1C782F7f33525d34028B7E8fA50a214303f" readonly id="polygon-wallet">
    <button type="button" id="copy-polygon">Copy Address</button>
    <label for="polygon-hash">Enter Transaction Hash:</label>
    <input type="text" id="polygon-hash" placeholder="Transaction Hash" required>
    <p id="polygon-gas-fee">Estimated Gas Fee: Fetching...</p>
  </div>

  <div id="cash-section" style="display:none;">
    <label for="cash-code">Enter Cash Code:</label>
    <input type="text" id="cash-code" placeholder="Master Cash Code" required>
  </div>

  <button type="submit">Submit & Pay</button>
</form>
</section>
</main>

<footer style="text-align:center; margin:20px; color:#888;">
  &copy; 2025 Braxen Development. All rights reserved.
</footer>

<!-- PayPal SDK -->
<script src="https://www.paypal.com/sdk/js?client-id=AdefJjr7m6mZkDwKqt_nyTiOSRCXIThl2h41bgHzev27XWXZFLyGhXF7i8RIfM1ZDucgNVzkdb-w5bnd&currency=USD"></script>
<script>
const tierSelect = document.getElementById('tier-select');
const billingCycle = document.getElementById('billing-cycle');
const paymentType = document.getElementById('payment-type');
const priceDisplay = document.getElementById('price-display');
const paypalContainer = document.getElementById('paypal-button-container');
const polygonSection = document.getElementById('polygon-section');
const cashSection = document.getElementById('cash-section');
const cashCodeInput = document.getElementById('cash-code');
const polygonHashInput = document.getElementById('polygon-hash');
const copyPolygonBtn = document.getElementById('copy-polygon');
const form = document.getElementById('quarterclub-form');

const MASTER_CASH_CODE = "YOUR_SECRET_CODE"; 

// Price Display
function updatePrice() {
    const selectedValue = tierSelect.value;
    const selectedText = tierSelect.options[tierSelect.selectedIndex].text;
    const billing = billingCycle.value;

    if (!selectedValue) {
        priceDisplay.textContent = 'Select a tier to view pricing.';
        return;
    }

    if (selectedValue.includes('_pdf')) {
        priceDisplay.textContent = 'Path to Profit Handbook — $10 one-time payment.';
        return;
    }

    const basePrice = parseFloat(selectedValue);
    let displayText = '';

    if (billing === 'monthly' && basePrice < 5) {
        displayText = `${selectedText} — *Monthly billing not available for this tier.*`;
    } else if (billing === 'annual') {
        const annualPrice = (basePrice * 12).toFixed(2);
        displayText = `${selectedText} — Annual Plan: $${annualPrice}/yr`;
    } else {
        displayText = `${selectedText} — Monthly Plan: $${basePrice}/mo`;
    }

    priceDisplay.textContent = displayText;
}

tierSelect.addEventListener('change', updatePrice);
billingCycle.addEventListener('change', updatePrice);

// Copy Polygon Wallet
copyPolygonBtn.addEventListener('click', () => {
    const wallet = document.getElementById('polygon-wallet');
    wallet.select();
    document.execCommand('copy');
    alert('Polygon address copied!');
});

// Polygon Gas Fee
async function updatePolygonGasFee() {
    const gasFeeEl = document.getElementById('polygon-gas-fee');
    try {
        const gasResponse = await fetch('https://gasstation.polygon.technology/v2');
        const gasData = await gasResponse.json();
        const fastGasGwei = gasData.fast.maxFee;

        const priceResponse = await fetch('https://api.coingecko.com/api/v3/simple/price?ids=matic-network&vs_currencies=usd');
        const priceData = await priceResponse.json();
        const maticUsd = priceData['matic-network'].usd;

        const gasMatic = fastGasGwei / 1e18;
        const gasUsd = gasMatic * maticUsd;

        gasFeeEl.textContent = `Estimated Gas Fee: ${gasMatic.toFixed(6)} MATIC (~$${gasUsd.toFixed(2)} USD)`;
    } catch (err) {
        console.error(err);
        gasFeeEl.textContent = "Estimated Gas Fee: Unavailable";
    }
}
setInterval(() => { if(paymentType.value === 'polygon') updatePolygonGasFee(); }, 15000);

// Payment Type Toggle
paymentType.addEventListener('change', () => {
    paypalContainer.innerHTML = '';
    polygonSection.style.display = cashSection.style.display = 'none';
    if(paymentType.value === 'paypal' && tierSelect.value) renderPayPalButton(getFinalAmount());
    if(paymentType.value === 'polygon') { polygonSection.style.display = 'block'; updatePolygonGasFee(); }
    if(paymentType.value === 'cash') cashSection.style.display = 'block';
});

// Final Amount
function getFinalAmount() {
    const basePrice = parseFloat(tierSelect.value);
    if(!basePrice) return null;
    let amount = basePrice;
    if(billingCycle.value === 'annual') amount *= 12;
    if(billingCycle.value === 'monthly' && amount < 5) { alert('Monthly payments are only available for $5 and above.'); return null; }
    return amount;
}

// PayPal Button
function renderPayPalButton(amount) {
    if(!amount) return;
    paypalContainer.innerHTML = "";
    paypal.Buttons({
        createOrder: (data, actions) => actions.order.create({ purchase_units: [{ amount: { value: amount } }] }),
        onApprove: (data, actions) => actions.order.capture().then(details => { alert('Transaction completed by ' + details.payer.name.given_name); })
    }).render('#paypal-button-container');
}

// Form Submission
form.addEventListener('submit', async (e) => {
    e.preventDefault();
    const finalAmount = getFinalAmount();
    if(finalAmount === null) return;

    const payment = paymentType.value;
    if(payment === 'cash' && cashCodeInput.value.trim() !== MASTER_CASH_CODE) return alert('Invalid cash code.');
    if(payment === 'polygon' && !polygonHashInput.value.trim()) return alert('Enter Polygon transaction hash.');
    if(payment === 'paypal') return renderPayPalButton(finalAmount);

    const businessData = {
        name: document.getElementById('business-name').value,
        ein: document.getElementById('business-ein').value,
        email: document.getElementById('business-email').value,
        phone: document.getElementById('business-phone').value,
        address: document.getElementById('business-address').value,
        city: document.getElementById('business-city').value,
        state: document.getElementById('business-state').value,
        zip: document.getElementById('business-zip').value,
        tier: tierSelect.value,
        billingCycle: billingCycle.value,
        paymentType: payment,
        cashCode: cashCodeInput.value.trim(),
        polygonHash: polygonHashInput.value.trim()
    };

    try {
        const response = await fetch('https://api.braxendevelopment.work/', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(businessData)
        });
        if(!response.ok) throw new Error('Network error');
        alert(`Form submitted successfully for ${payment.toUpperCase()}.\nAmount: $${finalAmount.toFixed(2)}`);
    } catch(err) {
        console.error(err);
        alert('Error submitting data. Try again.');
    }
});
</script>
</body>
</html>
